{% extends "spaced_repitition/base.html" %}
{%  block content %}


<style>

  .toggle-content {
  display: none;
}

</style>

<br>
<br>
<br>
<br>

<script type="text/javascript">

  var clicked = false;
  function toggle(id, answer){
    if(!clicked){
      clicked = true;
      document.getElementById(`card-${id}`).innerHTML = answer;
      document.getElementById(`buttons-${id}`).style.display = "block";

    }
    else{
      clicked = false;
      document.getElementById(`card-${id}`).innerHTML = "Click to see answer";
      document.getElementById(`buttons-${id}`).style.display = "none";
    }
  }
</script>

<div class="row">
  <div class="my-column
      col-xl-6 mt-2 mx-auto ">
     <div id="carouselExampleIndicators" class="carousel" data-ride="carousel">
            <ol class="carousel-cards" style="list-style: none;">
                {% for card in cards %}
                    {% if forloop.first %}
                        <li data-target="#carouselExampleIndicators" data-slide-to="{{forloop.counter0}}" class="active"></li>
                    {% else %}
                        <li data-target="#carouselExampleIndicators" data-slide-to="{{forloop.counter0}}"></li>
                    {% endif %}
                {% endfor %}
              <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
            </ol>
            <div class="carousel-inner">
                {% for card in cards reversed %}
                    {% if forloop.first %}
                        <div class="carousel-item active  ">
                    {% else %}
                        <div class="carousel-item  ">
                    {% endif %}
                      <!-- This is what I'm working with. I should work from this -->
                      <div class="card">
                        <div class="card-header">
                          <img class = "float:left mr-2 mt-1 small-profile-picture" src ="{{ card.creator.profile.image.url }}" >
                          <a class="mb-4 float-up"  > {{ card.creator }}</a>
                           <small> <p class=mt-2> {{ card.date }}  </p> </small>
                        </div> <!-- Card Header ender  -->

                        <div onclick="toggle({{ card.id }},'{{ card.answer }}');" style="cursor: pointer;">
                          <div class="card-body mt-4">
                            <h5 class="card-title "> <a class="article-title">{{ card.question }}</a></h5>
                            <p id="card-{{card.id}}"> Click to see answer </p>
                            <!-- <p class="card-text"> {{ card.answer}} </p> -->
                          </div> <!-- Card body ender -->
                        </div>
                        <!-- This is where we need to get toggle to work -->

                        <div class="toggle-content" id="buttons-{{card.id}}">
                          <a href="javascript:{document.getElementById('remembered').submit()}">
                            <div class="btn btn-success"> Remembered </div>
                          <a href="javascript:{document.getElementById('didnotremember').submit()}">
                            <div class="btn btn-danger"> Didn't Remember </div> </a>
                        </div> <!-- Both buttons ends  -->

                        </div>
                      </div>
                      <!-- Here it ends -->
                    </div>

                   <!--  Forms for the buttons -->
                      <form id="remembered" method="POST" action=" {% url 'remembered-from-study' card_id=card.id value=0 %} ">
                          {% csrf_token %}
                          <input type ="hidden">
                      </form>
                      <div>
                        <form id="didnotremember" method="POST" action=" {% url 'remembered-from-study' card_id=card.id value=1 %} ">
                          {% csrf_token %}
                          <input type ="hidden">
                        </form>
                      </div>

                  {% empty %}
                  <p> No cards are due </p>
                  <p> Find new cards on the <a href="{% url 'spaced_repitition-home' %}"> feed </a> </p>
                  <p> Or go to <a href="{% url 'spaced_repitition-mypage' %}"> mypage </a> to create more cards </p>

                {% endfor %}
            </div>

            <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
              <span class="sr-only">Previous</span>
            </a>

            <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
              <span class="carousel-control-next-icon" aria-hidden="true"></span>
              <span class="sr-only">Next</span>
            </a>

            </div>
        </div>
    </div> <!-- Col ends here  -->
  </div> <!-- Row ends here  -->


{% endblock content %}




